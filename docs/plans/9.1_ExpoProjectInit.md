# Plan 9.1: Expo Project Initialization

## Summary

Initialize the Expo mobile project with TypeScript, configure the project structure, and set up the foundational folder organization for the Walking App frontend. This is the first step in the frontend development phase.

## Affected Feature Slices

- **Frontend (New)**: WalkingApp.Mobile project creation
- **Common**: Shared configuration

## Project Structure

```
WalkingApp.Mobile/
├── app.json                    # Expo configuration
├── App.tsx                     # Entry point (placeholder)
├── package.json                # Dependencies
├── tsconfig.json               # TypeScript configuration
├── babel.config.js             # Babel configuration
├── .gitignore                  # Git ignore file
├── .env.example                # Environment template
│
├── src/
│   ├── components/             # Shared UI components
│   ├── screens/                # Screen components by feature
│   │   ├── auth/
│   │   ├── home/
│   │   ├── steps/
│   │   ├── friends/
│   │   ├── groups/
│   │   └── settings/
│   │
│   ├── navigation/             # Navigation configuration
│   ├── store/                  # State management (Zustand)
│   ├── services/               # API and external services
│   ├── hooks/                  # Custom React hooks
│   ├── theme/                  # Theming configuration
│   ├── types/                  # TypeScript type definitions
│   ├── utils/                  # Utility functions
│   └── config/                 # App configuration
│
└── assets/                     # Static assets (images, fonts)
```

## Implementation Steps

### 1. Create Expo Project

```bash
npx create-expo-app@latest WalkingApp.Mobile --template expo-template-blank-typescript
cd WalkingApp.Mobile
```

This creates a new Expo project with:
- TypeScript support out of the box
- Minimal template (blank)
- Latest Expo SDK version

### 2. Configure app.json

Update `app.json` with app metadata and configuration:

```json
{
  "expo": {
    "name": "Walking App",
    "slug": "walking-app",
    "version": "1.0.0",
    "orientation": "portrait",
    "icon": "./assets/icon.png",
    "userInterfaceStyle": "automatic",
    "splash": {
      "image": "./assets/splash.png",
      "resizeMode": "contain",
      "backgroundColor": "#ffffff"
    },
    "assetBundlePatterns": [
      "**/*"
    ],
    "ios": {
      "supportsTablet": true,
      "bundleIdentifier": "com.walkingapp.mobile"
    },
    "android": {
      "adaptiveIcon": {
        "foregroundImage": "./assets/adaptive-icon.png",
        "backgroundColor": "#ffffff"
      },
      "package": "com.walkingapp.mobile"
    },
    "web": {
      "favicon": "./assets/favicon.png"
    },
    "scheme": "walkingapp",
    "plugins": []
  }
}
```

### 3. Configure TypeScript

Update `tsconfig.json` with path aliases:

```json
{
  "extends": "expo/tsconfig.base",
  "compilerOptions": {
    "strict": true,
    "baseUrl": "./",
    "paths": {
      "@/*": ["src/*"],
      "@components/*": ["src/components/*"],
      "@screens/*": ["src/screens/*"],
      "@navigation/*": ["src/navigation/*"],
      "@store/*": ["src/store/*"],
      "@services/*": ["src/services/*"],
      "@hooks/*": ["src/hooks/*"],
      "@theme/*": ["src/theme/*"],
      "@types/*": ["src/types/*"],
      "@utils/*": ["src/utils/*"],
      "@config/*": ["src/config/*"]
    }
  }
}
```

### 4. Configure Babel

Update `babel.config.js` to support path aliases:

```javascript
module.exports = function(api) {
  api.cache(true);
  return {
    presets: ['babel-preset-expo'],
    plugins: [
      [
        'module-resolver',
        {
          root: ['./src'],
          alias: {
            '@': './src',
            '@components': './src/components',
            '@screens': './src/screens',
            '@navigation': './src/navigation',
            '@store': './src/store',
            '@services': './src/services',
            '@hooks': './src/hooks',
            '@theme': './src/theme',
            '@types': './src/types',
            '@utils': './src/utils',
            '@config': './src/config',
          },
        },
      ],
    ],
  };
};
```

### 5. Create Folder Structure

Create all the necessary folders:

```bash
mkdir -p src/{components,screens/{auth,home,steps,friends,groups,settings},navigation,store,services/api,hooks,theme,types,utils,config}
```

### 6. Create .env.example

```
# Supabase Configuration
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key

# API Configuration
API_BASE_URL=http://localhost:5000/api

# App Configuration
APP_ENV=development
```

### 7. Update .gitignore

Add to `.gitignore`:

```
# Environment
.env
.env.local

# Expo
.expo/
dist/
npm-debug.*
*.jks
*.p8
*.p12
*.key
*.mobileprovision
*.orig.*
web-build/

# macOS
.DS_Store

# Node
node_modules/
```

### 8. Create Placeholder App.tsx

Create a simple placeholder App.tsx:

```typescript
import { StatusBar } from 'expo-status-bar';
import { StyleSheet, Text, View } from 'react-native';

export default function App() {
  return (
    <View style={styles.container}>
      <Text>Walking App - Coming Soon!</Text>
      <StatusBar style="auto" />
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#fff',
    alignItems: 'center',
    justifyContent: 'center',
  },
});
```

### 9. Install Required Babel Plugin

```bash
npm install --save-dev babel-plugin-module-resolver
```

## Dependencies

| Package | Version | Purpose |
|---------|---------|---------|
| expo | Latest SDK | Framework |
| react | Latest | UI library |
| react-native | Latest | Mobile framework |
| typescript | ^5.x | Type safety |
| babel-plugin-module-resolver | ^5.x | Path aliases |

## Database Changes

None. This plan focuses on frontend project setup only.

## Tests

**Smoke Tests**:
- [ ] Project initializes without errors
- [ ] TypeScript compiles successfully
- [ ] Expo development server starts
- [ ] App displays on Android emulator (Plan 9.2)
- [ ] Path aliases resolve correctly

**Manual Testing**:
1. Run `npx expo start`
2. Verify development server starts
3. Check that app displays placeholder screen

## Acceptance Criteria

- [ ] Expo project created with TypeScript template
- [ ] app.json configured with app metadata
- [ ] TypeScript configured with path aliases
- [ ] Babel configured to support path aliases
- [ ] All folder structure created
- [ ] .env.example created
- [ ] .gitignore updated
- [ ] Placeholder App.tsx created
- [ ] Project builds without errors
- [ ] Expo development server starts successfully

## Dependencies on Other Plans

**Blocked by**: None (this is the starting point)

**Blocks**:
- Plan 9.2: Android Emulator Setup (needs project to test on)
- Plan 9.3: Supabase Client Configuration (needs project structure)
- Plan 9.4: Navigation Structure (needs project structure)
- Plan 9.5: State Management (needs project structure)
- Plan 9.6: Theme & Styling (needs App.tsx entry point)

## Risks and Mitigations

| Risk | Mitigation |
|------|------------|
| Expo SDK version compatibility | Pin to specific SDK version, test before upgrading |
| Path alias resolution issues | Test imports immediately after setup |
| TypeScript configuration errors | Use recommended Expo tsconfig base |

## Notes

- This plan deliberately keeps the App.tsx simple as a placeholder
- Actual app structure (providers, navigation, theme) will be added in Plan 9.6
- The folder structure is prescriptive to maintain consistency
- Path aliases make imports cleaner and easier to refactor

